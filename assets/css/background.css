.scene {
  position: fixed;
  width: 100vw;
  height: 100vh;
  perspective: 400px;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(
    to bottom,
    var(--bg-top) 0%,
    var(--bg-mid) 30%,
    var(--bg-center) 45%,
    var(--bg-center) 55%,
    var(--bg-bottom) 100%
  );
  transform: translateZ(0);
  z-index: -100;
}

.stars {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 50%;
  background-image:
    radial-gradient(2px 2px at 20% 30%, white 100%, transparent),
    radial-gradient(2px 2px at 50% 80%, white 100%, transparent),
    radial-gradient(1px 1px at 80% 40%, white 100%, transparent),
    radial-gradient(2px 2px at 10% 10%, white 100%, transparent),
    radial-gradient(2px 2px at 90% 90%, white 100%, transparent);
  background-size: 500px 500px;
  opacity: 0.8;
  z-index: 1;
}

.mountains-back {
  position: absolute;
  bottom: 50%;
  left: 0;
  width: 100%;
  height: 18vh;
  z-index: 22;
  background: linear-gradient(
    to bottom,
    var(--mountain-back-light) 0%,
    var(--mountain-back-dark) 100%
  );
  opacity: 0.9;
  clip-path: polygon(
    0% 100%,
    10% 60%,
    20% 85%,
    30% 40%,
    40% 75%,
    50% 30%,
    60% 80%,
    70% 50%,
    80% 85%,
    90% 45%,
    100% 100%
  );
  transform: translateZ(0);
}

.mountains {
  position: absolute;
  bottom: 50%;
  left: 0;
  width: 100%;
  height: 15vh;
  z-index: 23;
  background: linear-gradient(
    to bottom,
    var(--mountain-light) 0%,
    var(--mountain-dark) 100%
  );
  clip-path: polygon(
    0% 100%,
    0% 80%,
    15% 30%,
    30% 90%,
    45% 20%,
    60% 90%,
    75% 40%,
    90% 80%,
    100% 60%,
    100% 100%
  );
  transform: translateZ(0);
}

.grid-plane {
  position: absolute;
  width: 300%;
  height: 200%;
  left: -100%;
  background-image:
    linear-gradient(var(--grid-line) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
  background-size: var(--grid-size) var(--grid-size);
  transform-style: preserve-3d;
  z-index: 15;
  will-change: background-position;
}

.grid-bottom {
  top: 50%;
  transform-origin: top center;
  transform: rotateX(80deg);
  animation: moveGridBottom var(--speed) linear infinite;
}

.fog {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 30%,
    var(--bg-center) 45%,
    var(--bg-center) 55%,
    transparent 70%,
    transparent 100%
  );
  z-index: 20;
  pointer-events: none;
}

.horizon {
  position: absolute;
  top: 50%;
  left: 0;
  width: 100%;
  height: 2px;
  background: rgba(138, 43, 226, 0.3);
  z-index: 21;
}

.vignette {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, transparent 50%, black 150%);
  z-index: 25;
  pointer-events: none;
}

@keyframes moveGridBottom {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 0 var(--grid-size);
  }
}
